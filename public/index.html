<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simon Says Game</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="main-game-container">
  <header>
    <h1>Simon Says</h1>
    <nav>
      <a href="profile.html">Profile</a>
      <a href="leaderboard.html">Leaderboard</a>
      <button id="logoutBtn" class="nav-logout">Logout</button>
    </nav>
  </header>

  <div class="game-info">
    <p>Score: <span id="score">0</span></p>
    <p>High Score: <span id="highScore">0</span></p>
  </div>

  <div class="simon-board" id="simonBoard">
    <div class="btn color-btn green" id="green"></div>
    <div class="btn color-btn red" id="red"></div>
    <div class="btn color-btn yellow" id="yellow"></div>
    <div class="btn color-btn blue" id="blue"></div>
  </div>

  <div class="game-controls">
    <button id="startBtn">Start Game</button>
    <button id="resetBtn">Reset</button>
  </div>

  <div id="gameMessage" class="game-message"></div>
</div>

<audio id="sound-green" src="sounds/green.mp3"></audio>
<audio id="sound-red" src="sounds/red.mp3"></audio>
<audio id="sound-yellow" src="sounds/yellow.mp3"></audio>
<audio id="sound-blue" src="sounds/blue.mp3"></audio>
<audio id="sound-error" src="sounds/error.mp3"></audio>

<script src="js/game.js"></script>
<script>
  document.getElementById('logoutBtn').onclick = async () => {
    await fetch('/auth/logout');
    window.location.href = 'login.html';
  };

  // Fetch user high score and display
  async function fetchProfile() {
    const res = await fetch('/auth/profile');
    if (res.ok) {
      const data = await res.json();
      document.getElementById('highScore').textContent = data.user.highScore ?? 0;
    }
  }
  fetchProfile();
</script>
</body>
</html>
